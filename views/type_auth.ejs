<!DOCTYPE html>
<html lang="en">
    
<!-- Mirrored from laravel.spruko.com/dashfox/ltr/index by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Dec 2022 22:21:14 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>

        <meta charset="UTF-8">
        <meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=0'>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="Description" content="Dashfox - Laravel Admin & Dashboard Template">
		<meta name="Author" content="Spruko Technologies Private Limited">
		<meta name="Keywords" content="admin template, admin dashboard, bootstrap dashboard template, bootstrap 4 admin template, laravel, php framework, php laravel, laravel framework, php mvc, laravel admin panel, laravel admin panel, laravel template, laravel bootstrap, blade laravel, best php framework"/>

        <!-- Title -->
		<title> Admin Dashboard </title>
        
		<%- include('component/cssincludes'); %> 
    </head>

    <body  class="main-body light-theme app sidebar-mini active leftmenu-color">

        <!-- Loader -->
		<div id="global-loader">
			<img src="/publics/img/loader-2.svg" class="loader-img" alt="Loader">
		</div>
		<!-- /Loader -->

        <!-- main-sidebar -->
		<div class="app-sidebar__overlay" data-toggle="sidebar"></div>

		<!-- main-sidebar -->
		<%- include('component/sidemenu'); %> 
		<!-- main-sidebar -->

		<!-- main-content -->
		<div class="main-content app-content">

			<!-- main-header -->
			<%- include('component/header',{profil:user,ref:56,prof:"admin"}); %> 
		 	<!-- main-header  -->

			<div class="container-fluid mg-t-10">
				<!-- breadcrumb  -->
                    <div class="breadcrumb-header justify-content-between">
                        <div class="left-content">
							<div class="content-title row row-sm mb-2">
								<h3 class="col-xl-7 pd-r-0">Hi, welcome back!</h3>
								<h3 class="col-xl-3 pd-l-0"><%- user.Name %></h3>
							</div>
							<div id="adminid" style="display: none;"><%- user._id %></div>
							<nav aria-label="breadcrumb">
							</nav>
                        </div>
                    </div>
				 <!-- breadcrumb  -->
            </div>
   
			<!-- container  -->
			   <div class="container-fluid mg-t-20">
			   <!-- les donnees a ajouter -->
			   <div class="container-fluid mg-t-20">
				<!-- Stats sur les users -->
					<div class="row row-sm">
						<div class="col-xl-3 col-lg-6 col-md-6 col-sm-12">
							<div class="card">
								<div class="card-body iconfont text-left">
									<div class="d-flex justify-content-between">
										<h4 class="card-title mb-3">utilisateurs</h4>
									</div>
									<div class="d-flex mb-0">
										<div class="">
											<h4 class="mb-1 font-weight-bold">154<span class="text-success tx-13 ml-2">(+0.98%)</span></h4>
											<p class="mb-2 tx-12 text-muted">aperçu du mois dernier</p>
										</div>
										<div class="card-chart bg-primary-transparent brround ml-auto mt-0">
											<i class="typcn typcn-group-outline text-primary tx-24"></i>
										</div>
									</div>

									<div class="progress progress-sm mt-2">
										<div aria-valuemax="100" aria-valuemin="0" aria-valuenow="70" class="progress-bar bg-primary wd-70p" role="progressbar"></div>
									</div>
									<small class="mb-0  text-muted">Mensuel<span class="float-right text-muted">70%</span></small>
								</div>
							</div>
						</div>
						<div class="col-xl-3 col-lg-6 col-md-6 col-sm-12">
							<div class="card">
								<div class="card-body iconfont text-left">
									<div class="d-flex justify-content-between">
										<h4 class="card-title mb-3">Nombre Total de visites</h4>
									</div>
									<div class="d-flex mb-0">
										<div class="">
											<h4 class="mb-1 font-weight-bold">5274<span class="text-danger tx-13 ml-2">(-12.45%)</span></h4>
											<p class="mb-2 tx-12 text-muted">aperçu du mois dernier</p>
										</div>
										<div class="card-chart bg-pink-transparent brround ml-auto mt-0">
											<i class="typcn typcn-chart-line-outline text-pink tx-24"></i>
										</div>
									</div>

									<div class="progress progress-sm mt-2">
										<div aria-valuemax="100" aria-valuemin="0" aria-valuenow="70" class="progress-bar bg-pink wd-50p" role="progressbar"></div>
									</div>
									<small class="mb-0  text-muted">Mensuel<span class="float-right text-muted">50%</span></small>
								</div>
							</div>
						</div>
						<div class="col-xl-3 col-lg-6 col-md-6 col-sm-12">
							<div class="card">
								<div class="card-body iconfont text-left">
									<div class="d-flex justify-content-between">
										<h4 class="card-title mb-3">Taux de rebond</h4>
									</div>
									<div class="d-flex mb-0">
										<div class="">
											<h4 class="mb-1   font-weight-bold">76.3%<span class="text-success tx-13 ml-2">(+13.52%)</span></h4>
											<p class="mb-2 tx-12 text-muted">aperçu du mois dernier</p>
										</div>
										<div class="card-chart bg-teal-transparent brround ml-auto mt-0">
											<i class="typcn typcn-chart-bar-outline text-teal tx-20"></i>
										</div>
									</div>

									<div class="progress progress-sm mt-2">
										<div aria-valuemax="100" aria-valuemin="0" aria-valuenow="70" class="progress-bar bg-teal wd-60p" role="progressbar"></div>
									</div>
									<small class="mb-0  text-muted">Mensuel<span class="float-right text-muted">60%</span></small>
								</div>
							</div>
						</div>
						<div class="col-xl-3 col-lg-6 col-md-6 col-sm-12">
							<div class="card">
								<div class="card-body iconfont text-left">
									<div class="d-flex justify-content-between">
										<h4 class="card-title mb-3">Durée des Visites </h4>
									</div>
									<div class="d-flex mb-0">
										<div class="">
											<h4 class="mb-1 font-weight-bold">5m 24s<span class="text-success tx-13 ml-2">(+19.5%)</span></h4>
											<p class="mb-2 tx-12 text-muted">aperçu du mois dernier</p>
										</div>
										<div class="card-chart bg-purple-transparent brround ml-auto mt-0">
											<i class="typcn typcn-time  text-purple tx-24"></i>
										</div>
									</div>

									<div class="progress progress-sm mt-2">
										<div aria-valuemax="100" aria-valuemin="0" aria-valuenow="70" class="progress-bar bg-purple wd-40p" role="progressbar"></div>
									</div>
									<small class="mb-0  text-muted">Mensuel<span class="float-right text-muted">40%</span></small>
								</div>
							</div>
						</div>
					</div>
				<!-- Stats sur les users -->
				
					
					<div class="row row-sm mg-b-20 justify-content-between mg-10">
						<p>Clicker sur le button ajouter pour creer un nouveau type !!!</p>
						<a class="modal-effect btn btn-primary mb-3 mg-l-10 float-right" data-effect="effect-super-scaled" data-toggle="modal" href="#modaldemo9">Ajouter</a>
					 </div>

                     <div class="col-xl-12">
                        <div class="card">
                            <div class="card-header pb-0 pd-t-25">
                                <div class="d-flex justify-content-between">
                                    <h4 class="card-title mg-b-0">Table Of Type d'Authorite</h4>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover mb-0 text-md-nowrap border">
                                        <thead>
                                            <tr>
												<th>num</th>
                                                <th>num_reference</th>
                                                <th>Intitule</th>
												<th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
											<% for(var i=0; i < typeAuth.length; i++) { %>
												<span style="display: none;" id="id<%= i %>"><%= typeAuth[i]._id %></span>
												<tr>
													<th scope="row"><%= i %></th>
													<td id="ref<%= i %>"><%= typeAuth[i].num_reference %></td>
													<td id="int<%= i %>"><%= typeAuth[i].type_user %> %></td>
													<td>
														<a data-toggle="modal" href="#modaldemo8" onclick="senddata('<%= i %>')" class="btn">
															<i class="fe fe-edit tx-success"></i>
														</a>
														<a data-toggle="modal" onclick="deleteType('<%= i %>')" class="btn">
															<i class="fe fe-trash tx-danger mg-l-10"></i>
														</a>
													</td>
												</tr>
											<% } %>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
				</div>
			</div>

					 <!-- *********************************** modal meme des ajouts des users ************************************************************ -->
					 <div class="modal" id="modaldemo9">
						<div class="modal-dialog modal-lg" role="document">
							<div class="modal-content modal-content-demo">
								<div class="modal-header">
									<h3>Fill in the following fields</h3>
									<button aria-label="Close" class="close" data-dismiss="modal" type="button"><span aria-hidden="true">×</span></button>
								</div>
								<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
								<form id="myFormA" enctype="multipart/form-data">
									<div class="modal-body">
											<input class="form-control" type="text" name="ref" required placeholder="Reference number"><br>
											<input class="form-control" type="text" name="intitule" required placeholder="Intitule"><br>
									</div>
									<div class="modal-footer">
										<input class="btn ripple btn-primary form-control" type="submit" value="ADD">
									</div>
								</form>
							</div>
						</div>
					</div>
					 <!-- *********************************** modal meme ************************************************************ -->

					<!-- *********************************** modal meme des modification des users ************************************************************ -->
					<div class="modal" id="modaldemo8">
						<div class="modal-dialog modal-lg" role="document">
							<div class="modal-content modal-content-demo">
								<div class="modal-header">
									<h3>Modifier les informations ici</h3>
									<button aria-label="Close" class="close" data-dismiss="modal" type="button"><span aria-hidden="true">×</span></button>
								</div>
								<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
								<form id="myFormU" enctype="multipart/form-data">
									<div class="modal-body">
										<input class="form-control" type="text" id="idU" name="typeid" style="display: none;"><br>
											<div class="card">
												<div class="card-body">
													<div class="row row-sm">
														<div class="col-lg-12">
															<div class="input-group">
																<div class="input-group-prepend">
																	<div class="input-group-text">
																		Reference Number:
																	</div>
																</div>
																<input class="form-control" type="text" id="refU" name="ref">
															</div><!-- input-group -->
														</div><!-- col-4 -->
														<div class="col-lg-12 mg-t-20">
															<div class="input-group">
																<div class="input-group-prepend">
																	<div class="input-group-text">
																		Intitule:
																	</div>
																</div><!-- input-group-prepend -->
																<input class="form-control" type="text" id="intituleU" name="intitule">
															</div><!-- input-group -->
														</div>
													</div>
												</div>
											</div>
									</div>
									<div class="modal-footer">
										<input class="btn ripple btn-primary form-control" type="submit" value="EDIT">
									</div>
								</form>
							</div>
						</div>
					</div>
					<!-- *********************************** modal meme ************************************************************ -->


			   <!-- les donnees a ajouter -->
   
		   </div>
		   <!-- main-content closed -->  

		   <%- include('component/footer'); %> 
        
		   <%- include('component/scriptIncudes'); %> 

			<!---  *************************************************** script for adding type Authorite ************************************************ -->
			<script>
				function showConfirm(callback){
					swal(
						{
							title: 'Well done!',
							text: 'Type Authorite created successfully!',
							type: 'success',
							// confirmButtonColor: '#57a94f'
						}
					)
					callback();
				}
				function redirectHome(){
					setTimeout( function(){
						window.location.href="/type_auth";
					}, 1000)
				}
	
				$(document).ready(function() {
				  $('#myFormA').submit(function(e) {
					e.preventDefault(); // prevent form from submitting

					var formData = new FormData(this);

					$.ajax({
					  url: '<%= url%>web/typeAuth/store',
					  type: 'POST',
					  data: $(this).serialize(),
					  //data: $(this).serialize(),
					  success: function(data) {
						$('#modaldemo9').modal('hide')
						showConfirm(redirectHome);
					  },
					  error: function(xhr, status, error) {
						alert("Something went wrong"); // handle error response
					  }
					});
				  });
				});
			</script>

			<!---  *************************************************** script for mdifing type Authorite ************************************************ -->
			<script>
				function showConfirmU(callback){
					swal(
						{
							title: 'Well done!',
							text: 'Type Authorite modified successfully!',
							type: 'success',
							// confirmButtonColor: '#57a94f'
						}
					)
					callback();
				}
				function redirectHomeU(){
					setTimeout( function(){
						window.location.href= "/type_auth";
					}, 1000)
				}

				$(document).ready(function() {
				$('#myFormU').submit(function(e) {
					e.preventDefault(); // prevent form from submitting

					var formData = new FormData(this);

					$.ajax({
					url: '<%= url%>web/typeAuth/update',
					type: 'POST',
					data: $(this).serialize(),
					//data: $(this).serialize(),
					success: function(data) {
						$('#modaldemo8').modal('hide')
						showConfirmU(redirectHomeU);
					},
					error: function(xhr, status, error) {
						alert("Something went wrong"); // handle error response
					}
					});
				});
				});
			</script>

			<script>
				function senddata(i){
					
					var id =  document.getElementById('id'+i).innerHTML;
					var ref = document.getElementById('ref'+i).innerHTML;
					var intitule =  document.getElementById('int'+i).innerHTML;

					document.getElementById('idU').setAttribute("value",id)
					document.getElementById('refU').setAttribute("value",ref)
					document.getElementById('intituleU').setAttribute("value",intitule)
				}
			</script>

<!-- *********************************** modal meme des suppression des users ************************************************************ -->
<script>
	//$('#swal-delete').click(function () {
		function redirect(){
			setTimeout( function(){
				window.location.href="/type_auth";
			}, 1000)
		}

		function deleteType(i){
				swal(
					{
						title: "Are you sure you want to delete this Type_Authority?",
						text: "Your will not be able to revert this action!",
						type: "warning",
						showCancelButton: true,
						confirmButtonClass: "btn btn-danger",
						confirmButtonText: "Yes, delete it!",
						closeOnConfirm: false
					},
					function(){
						var id = document.getElementById('id'+i).innerHTML;
						//alert(id)
						var formData = {
							type_authID : id,
						};

						$.ajax({
							url: '<%= url%>web/typeAuth/destroy',
							type: 'POST',
							dataType: 'json',
							contentType: 'application/json',
							data: JSON.stringify({type_authID : id}),
							//data: $(this).serialize(),
							success: function(data) {
								//$('#modaldemo8').modal('hide')
								swal("Deleted!", "Type Authority Deleted Successfully.", "success");
								redirect();
								//alert(data)
							},
							error: function(xhr, status, error) {
								alert("Something went wrong "+error); // handle error response
							}
						});
					}
				);
			}
	
	//});
</script>
<!---**************************************************************************************************************************************-->
    </body>

<!-- Mirrored from laravel.spruko.com/dashfox/ltr/index by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Dec 2022 22:24:51 GMT -->
</html>