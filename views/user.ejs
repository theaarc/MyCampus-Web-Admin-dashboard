<!DOCTYPE html>
<html lang="en">
    
<!-- Mirrored from laravel.spruko.com/dashfox/ltr/index by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Dec 2022 22:21:14 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>

        <meta charset="UTF-8">
        <meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=0'>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="Description" content="Dashfox - Laravel Admin & Dashboard Template">
		<meta name="Author" content="Spruko Technologies Private Limited">
		<meta name="Keywords" content="admin template, admin dashboard, bootstrap dashboard template, bootstrap 4 admin template, laravel, php framework, php laravel, laravel framework, php mvc, laravel admin panel, laravel admin panel, laravel template, laravel bootstrap, blade laravel, best php framework"/>

        <!-- Title -->
		<title> Admin Dashboard </title>
        
		<%- include('component/cssincludes'); %>
    </head>

    <body  class="main-body light-theme app sidebar-mini active leftmenu-color">

        <!-- Loader -->
		<div id="global-loader">
			<img src="/publics/img/loader-2.svg" class="loader-img" alt="Loader">
		</div>
		<!-- /Loader -->

        <!-- main-sidebar -->
		<div class="app-sidebar__overlay" data-toggle="sidebar"></div>

		<!-- main-sidebar -->
		<%- include('component/sidemenu'); %> 
		<!-- main-sidebar -->
		<link href="/publics/css/formWizard.css" rel="stylesheet" />

		<!-- main-content -->
		<div class="main-content app-content">

			<!-- main-header -->
				<%- include('component/header',{profil:user,ref:3,prof:"admin"}); %> 
		 	<!-- main-header  -->
   
			<!-- container  -->
			   <div class="container-fluid mg-t-20">
				   <!-- breadcrumb  -->
					   <div class="breadcrumb-header justify-content-between">
                        <div class="left-content">
							<div class="content-title">
								<h3 class="">Hi, welcome back!</h3>
								<h3 class=""><%- user.userName %></h3>
							</div>
							<nav aria-label="breadcrumb">
							</nav>
					   </div>
					<!-- breadcrumb  -->
			   </div>
			   <!-- Container closed  -->
   
			   <!-- les donnees a ajouter -->
			   <div class="container-fluid mg-t-20">
				<!-- Stats sur les users -->
					<div class="row row-sm">
						<div class="col-xl-3 col-lg-6 col-md-6 col-sm-12">
							<div class="card">
								<div class="card-body iconfont text-left">
									<div class="d-flex justify-content-between">
										<h4 class="card-title mb-3">utilisateurs</h4>
									</div>
									<div class="d-flex mb-0">
										<div class="">
											<h4 class="mb-1 font-weight-bold">154<span class="text-success tx-13 ml-2">(+0.98%)</span></h4>
											<p class="mb-2 tx-12 text-muted">aperçu du mois dernier</p>
										</div>
										<div class="card-chart bg-primary-transparent brround ml-auto mt-0">
											<i class="typcn typcn-group-outline text-primary tx-24"></i>
										</div>
									</div>

									<div class="progress progress-sm mt-2">
										<div aria-valuemax="100" aria-valuemin="0" aria-valuenow="70" class="progress-bar bg-primary wd-70p" role="progressbar"></div>
									</div>
									<small class="mb-0  text-muted">Mensuel<span class="float-right text-muted">70%</span></small>
								</div>
							</div>
						</div>
						<div class="col-xl-3 col-lg-6 col-md-6 col-sm-12">
							<div class="card">
								<div class="card-body iconfont text-left">
									<div class="d-flex justify-content-between">
										<h4 class="card-title mb-3">Nombre Total de visites</h4>
									</div>
									<div class="d-flex mb-0">
										<div class="">
											<h4 class="mb-1 font-weight-bold">5274<span class="text-danger tx-13 ml-2">(-12.45%)</span></h4>
											<p class="mb-2 tx-12 text-muted">aperçu du mois dernier</p>
										</div>
										<div class="card-chart bg-pink-transparent brround ml-auto mt-0">
											<i class="typcn typcn-chart-line-outline text-pink tx-24"></i>
										</div>
									</div>

									<div class="progress progress-sm mt-2">
										<div aria-valuemax="100" aria-valuemin="0" aria-valuenow="70" class="progress-bar bg-pink wd-50p" role="progressbar"></div>
									</div>
									<small class="mb-0  text-muted">Mensuel<span class="float-right text-muted">50%</span></small>
								</div>
							</div>
						</div>
						<div class="col-xl-3 col-lg-6 col-md-6 col-sm-12">
							<div class="card">
								<div class="card-body iconfont text-left">
									<div class="d-flex justify-content-between">
										<h4 class="card-title mb-3">Taux de rebond</h4>
									</div>
									<div class="d-flex mb-0">
										<div class="">
											<h4 class="mb-1   font-weight-bold">76.3%<span class="text-success tx-13 ml-2">(+13.52%)</span></h4>
											<p class="mb-2 tx-12 text-muted">aperçu du mois dernier</p>
										</div>
										<div class="card-chart bg-teal-transparent brround ml-auto mt-0">
											<i class="typcn typcn-chart-bar-outline text-teal tx-20"></i>
										</div>
									</div>

									<div class="progress progress-sm mt-2">
										<div aria-valuemax="100" aria-valuemin="0" aria-valuenow="70" class="progress-bar bg-teal wd-60p" role="progressbar"></div>
									</div>
									<small class="mb-0  text-muted">Mensuel<span class="float-right text-muted">60%</span></small>
								</div>
							</div>
						</div>
						<div class="col-xl-3 col-lg-6 col-md-6 col-sm-12">
							<div class="card">
								<div class="card-body iconfont text-left">
									<div class="d-flex justify-content-between">
										<h4 class="card-title mb-3">Durée des Visites </h4>
									</div>
									<div class="d-flex mb-0">
										<div class="">
											<h4 class="mb-1 font-weight-bold">5m 24s<span class="text-success tx-13 ml-2">(+19.5%)</span></h4>
											<p class="mb-2 tx-12 text-muted">aperçu du mois dernier</p>
										</div>
										<div class="card-chart bg-purple-transparent brround ml-auto mt-0">
											<i class="typcn typcn-time  text-purple tx-24"></i>
										</div>
									</div>

									<div class="progress progress-sm mt-2">
										<div aria-valuemax="100" aria-valuemin="0" aria-valuenow="70" class="progress-bar bg-purple wd-40p" role="progressbar"></div>
									</div>
									<small class="mb-0  text-muted">Mensuel<span class="float-right text-muted">40%</span></small>
								</div>
							</div>
						</div>
					</div>
				<!-- Stats sur les users -->
				
				<div class="row row-sm mg-b-20 justify-content-between mg-10">
					<p>Clicker sur le button ajouter pour creer un nouvelle utilisateur !!!</p>
					<a class="modal-effect btn btn-primary mb-3 mg-l-10 float-right" data-effect="effect-super-scaled" data-toggle="modal" href="#modaldemo9">Ajouter</a>
				 </div>
				<div class="col-xl-12">
					<div class="card">
						<div class="card-header pb-0 pd-t-25">
							<div class="d-flex justify-content-between">
								<h4 class="card-title mg-b-0">Table des utilisateurs</h4>
								<!--****************************** filtrage des utilisaters **************************-->
								<div class="d-flex">
									<h5>Filtrer les utilisteurs</h5>
									<div class="SumoSelect" tabindex="0" role="button" aria-expanded="false">
										<select class="form-control" id="filterUser" name="filterUser" class="testselect2 SumoUnder" tabindex="-1">
											<option value="all">all</option>
											<% for(var i=0; i < typesUser.length; i++) { %>
												<option value="<%= typesUser[i]._id%>"><%= typesUser[i].type_user %></option>
											<% } %>
										</select>
									</div>
								</div>
							</div>
							
						</div>
						<div class="card-body">
							<div class="table-responsive">
								<table class="table key-buttons text-md-nowrap table-striped" id="example">
									<thead>
										<tr>
											<th class="" style="display: none;">id</th>
											<th class="wd-5p border-bottom-0">Photo Profile</th>
											<th class="wd-10p border-bottom-0">Nom</th>
											<th class="wd-15p border-bottom-0">Email</th>
											<th class="wd-10p border-bottom-0">Adresse</th>
											<th class="wd-10p border-bottom-0">Telephone</th>
											<th class="wd-5p border-bottom-0">Sexe</th>
											<th class="wd-15p border-bottom-0">Faculte</th>
											<th class="wd-15p border-bottom-0">Departement</th>
											<th class="wd-10p border-bottom-0">Action</th>
											
										</tr>
									</thead>
									<tbody id="displayUsers">
										<% for(var i=0; i < users.length; i++) { %>
											<% 	var faculte= JSON.parse(users[i].faculte) %>
											<% 	var dep= JSON.parse(users[i].departement) %>
											<% 	var type= JSON.parse(users[i].typeuser) %>
											<tr data-type="<%= type.id %>">
												<%- include('component/cardUser',{profil:users[i].avatar,name:users[i].userName,id:users[i]._id,email:users[i].email,tel:users[i].phone,address:users[i].address,sexe:users[i].sexe,fac:faculte,departement:dep,type:type,address:users[i].address,matricule:users[i].matricule,Profession:users[i].Profession,fonction:users[i].fonction,address:users[i].address,ref:'user',idr:i,facultes:facultes,typesUser:typesUser}); %>
											</tr>
										<% } %>
									</tbody>
								</table>
							</div>
						</div><!-- bd -->

						<!-- /******************************* script for filters ***************************************/ -->
						<script>

							const userTypeFilter = document.getElementById("filterUser");
							const userTableBody = document.getElementById("displayUsers");

							  // Function to show all users
							function showAllUsers() {
								const allUserRows = userTableBody.querySelectorAll('tr[data-type]');
								allUserRows.forEach((row) => {
									row.style.display = 'table-row';
								});
							}

							// Function to filter users based on the selected dropdown value
							function filterUsers() {
								const selectedValue = userTypeFilter.value;
								const allUserRows = userTableBody.querySelectorAll('tr[data-type]');
								allUserRows.forEach((row) => {
								const userType = row.getAttribute('data-type');
								if (selectedValue === 'all' || selectedValue === userType) {
									row.style.display = 'table-row';
								} else {
									row.style.display = 'none';
								}
								});
							}

							// Event listener to detect changes in the dropdown
							userTypeFilter.addEventListener("change", filterUsers);
						</script>
					</div><!-- bd -->
				</div>
				
				</div>
			</div>

					<!-- *********************************** modal meme des ajouts des users ************************************************************ -->
					<div class="modal" id="modaldemo9">
						
						<div class="modal-dialog modal-lg" role="document">
							<div class="modal-content modal-content-demo panel panel-primary tabs-style-2">
									<div class="mg-10"><button aria-label="Close" class="close" data-dismiss="modal" type="button"><span aria-hidden="true">×</span></button></div>
								<div class="panel-body tabs-menu-body main-content-body-right border">
										<div class="col-lg-12 col-md-12">
											<div class="card">
												<div class="card-body">
													<div class="main-content-label mg-b-5">
														Ajouter un nouvelle utilisateur
													</div>
													<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
													<form id="wizardForm" enctype="multipart/form-data">															  
														<!-- Circles which indicates the steps of the form: -->
													  	<div style="text-align:center;margin-top:40px;" id="steps">
															<span class="step"></span>
															<span class="step"></span>
															<span class="step"></span>
															<span class="step"></span>
													  	</div>
														  <div class="error-message"></div>

													  	<div class="form-step">
															<h3>Information de Contact</h3>
															<section>
																<div class="row row-sm">
																	<div class="form-group wd-xs-300">
																		<label class="form-control-label">Email: </label> 
																		<input class="form-control" id="email" name="email" placeholder="name@gmail.com" type="email">
																	</div>
																	<div class="form-group wd-xs-300">
																		<label class="form-control-label">Telephone: </label> 
																		<input class="form-control" id="phone" name="phone" value="+237" placeholder="658780480" type="tel">
																	</div>
																	<div class="form-group wd-xs-300">
																		<label class="form-control-label">Adresse: </label> 
																		<input class="form-control" id="address" name="address" placeholder="Nkolbisson" type="text">
																	</div>																																
																</div>
															</section>
														</div>
														<div style="text-align:center" class="form-step">
															<h3>Information Personel</h3>
															<section class="row row-sm">
																<div class="form-group wd-xs-300">
																	<label class="form-control-label">Sexe: </label> 
																	<div class="SumoSelect" tabindex="0" role="button" aria-expanded="false">
																		<select class="form-control" id="sexe" name="sexe" class="testselect2 SumoUnder" tabindex="-1">
																			<option value="M">M</option>
																			<option value="F">F</option>
																		</select><br>
																	</div><br>
																</div>
																<div class="form-group wd-xs-300">
																	<label class="form-control-label">Photo de Profile(Optionnel): </label> <input class="form-control" id="avatar" name="avatar" type="file">
																</div>
																<div class="form-group wd-xs-300">
																	<label class="form-control-label">Type: </label>
																	<div class="SumoSelect" tabindex="0" role="button" aria-expanded="false">
																		<select class="form-control" id="typeUsers" name="typeA" class="testselect2 SumoUnder" tabindex="-1">
																			<% for(var i=0; i < typesUser.length; i++) { %>
																				<option value="<%= typesUser[i]._id%>"><%= typesUser[i].type_user %></option>
																			<% } %>
																			</select><br>
																	</div><br>
																</div>																
															</section>
														</div>
														<div class="form-step">
															<h3>Information Professionnel</h3>
															<section>
																<div class="col-sm-12">
																<label class="form-label" >Faculte</label>
																	<div class="SumoSelect" tabindex="0" role="button" aria-expanded="false">
																		<select class="form-control" id="fac" name="faculte" class="testselect2 SumoUnder" tabindex="-1">
																			<option id="facUm" value="" selected></option>
																				<% for(var i=0; i < facultes.length; i++) { %>
																					<option value="<%= facultes[i]._id%>"><%= facultes[i].intitule %></option>
																				<% } %>
																			</select><br>
																		</div><br>
																	</div>
																	<div class="col-sm-12 mg-t-20 mg-md-t-0">
																		<label class="form-label">Departement</label>
																		<div class="SumoSelect" value="" tabindex="0" role="button" aria-expanded="false">
																			<select class="form-control" id="dep" name="departement" class="testselect2 SumoUnder" tabindex="-1">
																				<option id="depUm" selected></option>
																				<% for(var i=0; i < departement.length; i++) { %>
																					<option value="<%= departement[i]._id%>"><%= departement[i].intitule %></option>
																				<% } %>
																			</select><br>
																		</div><br>
																	</div>
																	<div class="col-sm-12 mg-t-20 mg-md-t-0 mg-b-20 mg-md-b-0">
																		<label class="form-label">Code:</label>
																		<div class="input-group">
																			<input type="text" class="form-control" value="" placeholder="" name="mat" id="mat">
																		</div>
																	</div><br>
																	<div class="col-sm-12 mg-t-20 mg-md-t-0 mg-b-20 mg-md-b-0">
																		<label class="form-label">Fonction:</label>
																		<div class="input-group">
																			<input type="text" class="form-control" value="" placeholder="" name="fonction" id="fonction">
																		</div>
																	</div><br>
																	<div class="col-sm-12 mg-t-20 mg-md-t-0 mg-b-20 mg-md-b-0">
																		<label class="form-label">Profession:</label>
																		<div class="input-group">
																			<input type="text" class="form-control" value="" placeholder="" name="Profession" id="Profession">
																		</div>
																	</div><br>
															</section>
														</div>
														<div class="form-step">
															<h3>Information de Connexion</h3>
															<div class="col-sm-12">
																<label class="form-control-label">Username: </label> 
																<input class="form-control" id="userName" name="userName" placeholder="TheAARC" type="text">
															</div>
															<div class="col-sm-12 mg-t-20 mg-md-t-0">
																<label class="form-control-label">mot de passe: </label> 
																<input class="form-control" id="password" name="password" placeholder="***********" type="password">
																<div class="input-group-prepend">
																	<span class="input-group-text"><i class="fe fe-eye" onclick="togglePasswordVisibility()"></i></span>
																</div>
															</div>
															<div class="col-sm-12 mg-t-20 mg-md-t-0 mg-b-20 mg-md-b-0">
																<label class="form-control-label">confirmer mot de passe: </label> 
																<input class="form-control" id="confirmPassword" name="confirmPassword" placeholder="***********" type="password">
																<div class="input-group-prepend">
																	<span class="input-group-text"><i class="fe fe-eye" onclick="togglePasswordVisibility()"></i></span>
																</div>
															</div>

														</div><br>

														
															<div class="form-navigation d-flex flex-row-reverse">
																<button class="submit btn btn-primary mg-l-20">Submit</button>
																<button class="next btn btn-primary mg-l-20">Next</button>
																<button class="previous btn btn-primary mg-l-20">Previous</button>
															</div>
													</form>
													<br>
												</div>
											</div>
										</div>
								</div>
							</div>
						</div>
					</div>
					<!-- *********************************** modal meme ************************************************************ -->

					<!-- *********************************** modal meme des modification des users ************************************************************ -->
					<div class="modal" id="modaldemo8">
						<div class="modal-dialog modal-lg" role="document">
							<div class="modal-content modal-content-demo">
								<div id="updateref" style="display: none;"></div>
								<div class="modal-header">
									<h3>Modifier les informations ici</h3>
									<button aria-label="Close" class="close" data-dismiss="modal" type="button"><span aria-hidden="true">×</span></button>
								</div>
								<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
								<form id="idForm" enctype="multipart/form-data">
									<div class="modal-body">
										<input class="form-control" type="text" id="idU" name="userID" style="display: none;"><br>
												<!-- <div class="card-body">													 -->
													<div class="row row-sm d-flex justify-content-around">
														<div class="col-12">
															<!-- invisible url for image -->
															<!-- <input id="profilpic" name="profilpic" style="display: none;"> -->
															<!-- <div class="col-lg-12 mg-t-20">
																<div class="input-group">
																	<div class="input-group-prepend">
																		<div class="input-group-text">
																			Chose a profile picture if you don't have one yet or change the existing !
																		</div> input-group-text 
																	</div> input-group-prepend 
																	<br><small class="input-group-text">NB : SELECTING AN IMAGE WILL UPDATE YOUR PROFILE PICTURE TO ACTUAL SELECTED IMAGE</small><br>
																	
																</div>
																<input class="form-control" type="file" name="avatar">
															</div> -->
															<input id="profilpic1" name="profilpic1" style="display: none;">
															<div class="main-profile-overview col-lg-12">
																<div class="main-img-user profile-user">
																	<img alt="" id="profilpic" src="">
																	<a class="fas fa-camera profile-edit" onclick="openFileExplorer()">
																		<input name="avatar" type="file" id="file-input" style="display: none;">
																	</a>
																</div>
															</div>
															<div class="col-lg-12">
																<div class="input-group">
																	<div class="input-group-prepend">
																		<div class="input-group-text">
																			Username:
																		</div>
																	</div>
																	<input class="form-control" type="text" id="usernameU" name="userName">
																</div><!-- input-group -->
															</div><!-- col-4 -->
															<div class="col-lg-12 mg-t-20">
																<div class="input-group">
																	<div class="input-group-prepend">
																		<div class="input-group-text">
																			Email:
																		</div>
																	</div><!-- input-group-prepend -->
																	<input class="form-control" type="email" id="emailU" name="email">
																</div><!-- input-group -->
															</div>
															<div class="col-lg-12 mg-t-20">
																<div class="input-group">
																	<div class="input-group-prepend">
																		<div class="input-group-text">
																			Telephone:
																		</div>
																	</div><!-- input-group-prepend -->
																	<input class="form-control" type="tel" id="telU" name="phone">
																</div><!-- input-group -->
															</div>
															<div class="col-lg-12 mg-t-20">
																<div class="input-group">
																	<div class="input-group-prepend">
																		<div class="input-group-text">
																			Sexe:
																		</div><!-- input-group-text -->
																	</div><!-- input-group-prepend -->
																	<input class="form-control" type="text" name="sexe" id="sexeU">
																</div>
															</div>
															<div class="col-lg-12 mg-t-20">
																<div class="input-group">
																	<div class="input-group-prepend">
																		<div class="input-group-text">
																			Address:
																		</div><!-- input-group-text -->
																	</div><!-- input-group-prepend -->
																	<input class="form-control" type="text" name="address" id="addressU">
																</div>
															</div>
															<div class="col-lg-12 mg-t-20">
																<div class="input-group">
																	<div class="input-group-prepend">
																		<div class="input-group-text">
																			New Password:
																		</div><!-- input-group-text -->
																	</div><!-- input-group-prepend -->
																	<input class="form-control" type="password" name="password" id="passwordU">
																</div>
															</div>
														

															
																<div class="col-12 mg-t-20">
																	<div class="input-group">
																		<div class="input-group-prepend">
																			<div class="input-group-text">
																				Select Your Type
																			</div><!-- input-group-text -->
																		</div><!-- input-group-prepend -->
																		<div class="SumoSelect" tabindex="0" role="button" aria-expanded="false">
																			<select class="form-control" id="typeU" name="type" class="testselect2 SumoUnder" tabindex="-1">
																				<!-- <option value="">none</option> -->
																				<option id="typeUm" selected></option>
																				<% for(var i=0; i < typesUser.length; i++) { %>
																					<option value="<%= typesUser[i]._id%>"><%= typesUser[i].type_user %></option>
																				<% } %>
																			</select>
																		</div>
																	</div>
																</div>
														</div>

														<div id="forauth" class="col-12">
															<div id="prof">
																<div class="col-lg-12 mg-t-20">
																	<div class="input-group">
																		<div class="input-group-prepend">
																			<div class="input-group-text">
																				fonction:
																			</div><!-- input-group-text -->
																		</div><!-- input-group-prepend -->
																		<input class="form-control" type="text" id="fonctionU" name="fonction" placeholder="fonction">
																	</div>
																</div>
																<div class="col-lg-12 mg-t-20">
																	<div class="input-group">
																		<div class="input-group-prepend">
																			<div class="input-group-text">
																				Profession:
																			</div><!-- input-group-text -->
																		</div><!-- input-group-prepend -->
																		<input class="form-control" type="text" id="ProfessionU" name="Profession" placeholder="Profession">
																	</div>
																</div>
															</div>

															<div id="prof1">
																<div class="col-lg-12 mg-t-20">
																	<div class="input-group">
																		<div class="input-group-prepend">
																			<div class="input-group-text">
																				Code:
																			</div><!-- input-group-text -->
																		</div><!-- input-group-prepend -->
																		<input class="form-control" type="text" name="matricule" id="matriculeU">
																	</div>
																</div>

																<div class="col-lg-12 mg-t-20">
																	<div class="input-group">
																		<div class="input-group-prepend">
																			<div class="input-group-text">
																				Select Your Faculty
																			</div><!-- input-group-text -->
																		</div><!-- input-group-prepend -->
																		<div class="SumoSelect" tabindex="0" role="button" aria-expanded="false">
																			<select class="form-control" id="facU" name="faculte" class="testselect2 SumoUnder" tabindex="-1">
																				<option value="">none</option>
																				<option id="facUmm" selected></option>
																				<% for(var i=0; i < facultes.length; i++) { %>
																					<option value="<%= facultes[i]._id%>"><%= facultes[i].intitule %></option>
																				<% } %>
																			</select>
																		</div>
																	</div><br>

																	<div class="input-group">
																		<div class="input-group-prepend">
																			<div class="input-group-text">
																				Select Your Departement
																			</div><!-- input-group-text -->
																		</div><!-- input-group-prepend -->
																		<div class="SumoSelect" tabindex="0" role="button" aria-expanded="false">
																			<select class="form-control" id="depU" name="departement" class="testselect2 SumoUnder" tabindex="-1">
																				<option value="">none</option>
																				<option id="depUmm" selected></option>
																				<% for(var i=0; i < departement.length; i++) { %>
																					<option value="<%= departement[i]._id%>"><%= departement[i].intitule %></option>
																				<% } %>
																			</select>
																		</div>
																	</div>
																</div>
															</div>
														</div>
													</div>
												<!-- </div> -->
										</div>
										<div class="modal-footer">
											<input class="btn ripple btn-primary form-control" type="submit" value="EDIT">
										</div>
								</form>
							</div>
						</div>
					</div>

					<script>
						const dropdown = document.getElementById("typeU");
					  
						dropdown.addEventListener("change", function () {
						  // Get the selected value
						  const selectedValue = dropdown.value;
							if(selectedValue == '64b67193b808e7223c3b8aa0'){
								document.getElementById("forauth").style.display = 'none';
								document.getElementById("prof").style.display = 'none';
								document.getElementById("prof1").style.display = 'none';
							}else if(selectedValue == '644bca7f0368484533c6d519'){
								document.getElementById("forauth").style.display = 'block';
								document.getElementById("prof").style.display = 'block';
								document.getElementById("prof1").style.display = 'none';
							}else {
								document.getElementById("forauth").style.display = 'block';
								document.getElementById("prof").style.display = 'block';
								document.getElementById("prof1").style.display = 'block';
							}
						});
					  </script>
					  
					<!--****************** Script for changing image dynamically************************ -->
					<script>
						// Get references to the file input and image preview elements
						const fileInput = document.getElementById('file-input');
						const imagePreview = document.getElementById('profilpic');

						// Add event listener for the file input change event
						fileInput.addEventListener('change', function() {
						// Check if any file is selected
						if (fileInput.files && fileInput.files[0]) {
							// Create a FileReader object
							const reader = new FileReader();

							// Set the onload event handler
							reader.onload = function(e) {
							// Update the source of the image preview with the selected image
							imagePreview.src = e.target.result;
							};

							// Read the selected file as a data URL
							reader.readAsDataURL(fileInput.files[0]);
						}
						});

					</script>

					<script>
						function togglePasswordVisibility() {
							var passwordInput = document.getElementById("password");
							if (passwordInput.type === "password") {
								passwordInput.type = "text";
							} else {
								passwordInput.type = "password";
							}
						}

							
						function openFileExplorer() {
							var fileInput = document.getElementById("file-input");
							fileInput.click();
						}
					</script>
					<!-- *********************************** modal meme ************************************************************ -->
			   <!-- les donnees a ajouter -->
   
		   </div>
		   <!-- main-content closed -->  

		   <%- include('component/footer'); %> 
        
		   <%- include('component/scriptIncudes'); %> 

		   <!-- <script src="/publics/js/formWizard.js"></script> -->
		   <!---  *************************************************** script for form wizard on adding users ************************************************ -->
		   <script>
			
				function togglePasswordVisibility() {
					var passwordInput = document.getElementById("password");
					var passwordInput1 = document.getElementById("confirmPassword");

					if (passwordInput.type === "password" || passwordInput1.type ==="password") {
						passwordInput.type = "text";
						passwordInput1.type = "text";
					} else {
						passwordInput.type = "password";
						passwordInput1.type = "password";
					}
				}
				
				$(document).ready(function() {
					var currentStep = 0;
					var formSteps = $('.form-step');
					var formNavigation = $('.form-navigation');
					var errorMessage = $('.error-message');

					var phoneError = document.getElementById('phoneError');
					var passwordError = document.getElementById('passwordError');
					
					// Show the current step
					showStep(currentStep);
					
					// Handle next button click
					$('.next').click(function() {
						if (validateStep(currentStep)) {
							if (currentStep === 1 && $('#typeUsers').val() == '64b67193b808e7223c3b8aa0') {
								currentStep = 3;
							} else {
								currentStep++;
							}

							showStep(currentStep);
							errorMessage.text(''); // Clear the error message if validation is successful
						} else {
							errorMessage.text('Please fill in all fields.'); // Display error message
						}
					});
					
					// Handle previous button click
					$('.previous').click(function() {
						if (currentStep === 3 && $('#typeUsers').val() == '64b67193b808e7223c3b8aa0') {
							currentStep = 1;
						} else {
							currentStep--;
						}
						showStep(currentStep);
						errorMessage.text(''); // Clear the error message when moving to the previous step
					});
					
					// Handle form submission
					$('#wizardForm').submit(function(event) {
						event.preventDefault(); // Prevent default form submission
					});
					
					// Show the specified step
					function showStep(stepIndex) {
						formSteps.removeClass('active');
						$(formSteps[stepIndex]).addClass('active');
						
						// Hide/show navigation buttons based on the step
						if (stepIndex === 0) {
							$('.previous').hide();
						} else if (stepIndex === formSteps.length - 1) {
							$('.next').hide();
							$('.submit').show();
						} else {
							$('.previous').show();
							$('.next').show();
							$('.submit').hide();
						}
					}
					
					// Validate the current step
					function validateStep(stepIndex) {
						var inputs = $(formSteps[stepIndex]).find('input:not([type="file"]), textarea');
						var isValid = true;
						
						inputs.each(function() {
							var inputValue = $(this).val().trim();
							
							if (inputValue === '') {
								isValid = false;
								$(this).addClass('invalid');
							} else {
								$(this).removeClass('invalid');
							}

							// Perform additional validation for specific fields
							if (stepIndex === 0 && $(this).attr('id') === 'phone') {
								
								var removedStr = inputValue.replace(/^\+237/, "");

								if (removedStr.length !== 9) {
									isValid = false;
									$(this).addClass('invalid');
									$('.error-message').text('Phone number must be 9 digits long.');
								} else {
									$(this).removeClass('invalid');
									$('.error-message').text('');
								}
							}
						});
						
						return isValid;
					}
				
					// ******************************************* script for adding users

					function showConfirm(callback){
						swal(
							{
								title: 'Well done!',
								text: 'User created successfully!',
								type: 'success',
								// confirmButtonColor: '#57a94f'
							}
						)
						callback();
					}
					
					function redirectHome(){
						setTimeout( function(){
							window.location.href="/user/";
						}, 1000)
					}

					$('.submit').click(function() {
						if (validateStep(currentStep)) {
							$('#wizardForm').submit(function(e) {
								e.preventDefault(); // prevent form from submitting

								var isValid = true;
								
								var formData = new FormData(this);

								var passwordValue = $('#password').val();
								var confirmPasswordValue = $('#confirmPassword').val();

								// Verify password and confirm password match
								if (passwordValue !== confirmPasswordValue) {
									isValid = false;
									$('#password, #confirmPassword').addClass('invalid');
								} else {
									$('#password, #confirmPassword').removeClass('invalid');
								}

								if (isValid) {
									$.ajax({
										url: '<%= url%>web/user/register',
										type: 'POST',
										processData: false,
										contentType: false,
										data: formData,
										//data: $(this).serialize(),
										success: function(data) {
											$('#modaldemo9').modal('hide')
											showConfirm(redirectHome);
										},
										error: function(xhr, status, error) {
											alert("Something went wrong"); // handle error response
										}
									});									
								} else {
									errorMessage.text('Please fill in all fields correctly.'); // Display error message
								}
							});
						} else {
							errorMessage.text('Please fill in all fields.'); // Display error message
						}
					});
				});

		   </script>

			<!---  *************************************************** script for adding authorities ************************************************ -->
			<script>
				function showConfirmA(callback){
					swal(
						{
							title: 'Well done!',
							text: 'Authority created successfully!',
							type: 'success',
							// confirmButtonColor: '#57a94f'
						}
					)
					callback();
				}
				function redirectHomeA(){
					setTimeout( function(){
						window.location.href="/user/";
					}, 1000)
				}
	
				$(document).ready(function() {
				  $('#myFormA').submit(function(e) {
					e.preventDefault(); // prevent form from submitting

					var formData = new FormData(this);

					$.ajax({
					  url: '<%= url%>webAut/autorite/register',
					  type: 'POST',
					  processData: false,
   				 	  contentType: false,
					  data: formData,
					  //data: $(this).serialize(),
					  success: function(data) {
						$('#modaldemo9').modal('hide')
						showConfirmA(redirectHomeA);
					  },
					  error: function(xhr, status, error) {
						//console.log(xhr.responseText); // handle error response
						alert("Something went wrong");
					  }
					});
				  });
				});
			</script>

<!---  *************************************************** script for modifing users ************************************************ -->
<script>
	function showConfirm(callback){
		swal(
				{
					title: 'Well done!',
					text: 'User Modified successfully!',
					type: 'success',
					// confirmButtonColor: '#57a94f'
				}
			)
			callback();
	}

	// function showConfirmA(callback){
	// 	swal(
	// 			{
	// 				title: 'Well done!',
	// 				text: 'Authority Modified successfully!',
	// 				type: 'success',
	// 				// confirmButtonColor: '#57a94f'
	// 			}
	// 		)
	// 		callback();
	// }
	
	function redirectHome(){
		setTimeout( function(){
			window.location.href="/user/";
		}, 1000)
	}
	
	$(document).ready(function() {
		$('#idForm').submit(function(e) {
			e.preventDefault(); // prevent form from submitting

			var ref = document.getElementById('updateref').innerHTML;
			//alert(ref)
			
			var formData = new FormData(this);

			// if(ref == 'user'){
				$.ajax({
					url: '<%= url %>web/user/update',
					type: 'POST',
					processData: false,
					contentType: false,
					data: formData,
					//data: $(this).serialize(),
					success: function(data) {
						$('#modaldemo8').modal('hide')
						showConfirm(redirectHome);
						//alert(data)
					},
					error: function(xhr, status, error) {
						alert("Something went wrong"); // handle error response
					}
				});

			// }else if(ref == 'auth'){
			// 	$.ajax({
			// 		url: '<%= url %>webAut/autorite/update',
			// 		type: 'POST',
			// 		processData: false,
			// 		contentType: false,
			// 		data: formData,
			// 		//data: $(this).serialize(),
			// 		success: function(data) {
			// 			$('#modaldemo8').modal('hide')
			// 			showConfirmA(redirectHome);
			// 			//alert(data)
			// 		},
			// 		error: function(xhr, status, error) {
			// 			alert("Something went wrong"); // handle error response
			// 		}
			// 	});
			// }
	
		});
	});
</script>
    </body>

<!-- Mirrored from laravel.spruko.com/dashfox/ltr/index by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Dec 2022 22:24:51 GMT -->
</html>